<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h2>Login page</h2>
    <form>
      <div><label>Email</label><input id="email" type="text" /></div>
      <div><label>Password</label><input id="password" type="password" /></div>
      <button type="submit">Login</button>
    </form>
  </body>
  <script>
    (function () {
      const element = document.querySelector('form');
      element.addEventListener('submit', (event) => {
        event.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        fetch('/api/login', {
          method: 'POST',
          body: JSON.stringify({
            email, password
          }),
          headers: {"Content-type": "application/json; charset=UTF-8"}
        }).then((res) => res.json()).then((data) => {
          if(!data.ok){
            alert(data.data.message);
            return;
          }
          window.location.href = '/static'
        })
      });
    })();
  </script>
</html>
